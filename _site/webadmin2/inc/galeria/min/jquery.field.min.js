!function(e){var t={delimiter:",",checkboxRangeKeyBinding:"shiftKey",useArray:!1};e.Field={version:"0.9.2",setDefaults:function(n){e.extend(t,n)},setProperty:function(e,n){t[e]=n},getProperty:function(e){return t[e]}},e.fn.fieldArray=function(e){var r=u(e);return"undefined"==r?n(this):(("string"==r||"number"==r)&&(e=e.toString().split(t.delimiter),r="array"),"array"==r?i(this,e):this)},e.fn.getValue=function(){return n(this).join(t.delimiter)};var n=function(e){var t=[];return e.each(function(){var e=c(this);switch(e){case"checkbox":case"radio":this.checked&&t.push(this.value);break;case"select":if("select-one"==this.type)t.push(-1==this.selectedIndex?"":a(this[this.selectedIndex]));else for(var n=0;n<this.length;n++)this[n].selected&&t.push(a(this[n]));break;case"text":t.push(this.value)}}),t};e.fn.setValue=function(e){return i(this,e||0===e?e.toString().split(t.delimiter):[""])};var i=function(e,n){return e.each(function(){var e,i=c(this);switch(i){case"checkbox":case"radio":this.checked=s(n,this.value)?!0:!1;break;case"select":for(var r="select-one"==this.type,u=!0,o=0;o<this.length;o++)if(e=a(this[o]),bSelectItem=s(n,e)){if(this[o].selected=!0,r){u=!1;break}}else r||(this[o].selected=!1);r&&u&&this[0]&&(this[0].selected=!0);break;case"text":this.value=n.join(t.delimiter)}}),e};e.fn.formHash=function(n){var i=0==arguments.length,r={};return this.filter("form").each(function(){for(var c,a,s,u=this.elements,o={},l=0,h=u.length;h>l;l++)if(c=u[l],a=c.name,a&&!o[a]){var s=e(c.tagName.toLowerCase()+"[name='"+a+"']",this);i?r[a]=s[t.useArray?"fieldArray":"getValue"]():"undefined"!=typeof n[a]&&s[t.useArray?"fieldArray":"setValue"](n[a]),o[a]=!0}}),i?r:this},e.fn.autoAdvance=function(t){return this.find(":text,:password,textarea").bind("keyup.autoAdvance",function(n){var i=e(this),r=parseInt(i.attr("maxlength"),10);if(isNaN(r)||"|9|16|37|38|39|40|".indexOf("|"+n.keyCode+"|")>-1)return!0;if(i.getValue().length>=i.attr("maxlength")){var c=i.moveNext().select();e.isFunction(t)&&t.apply(i,[c])}})},e.fn.moveNext=function(){return this.moveIndex("next")},e.fn.movePrev=function(){return this.moveIndex("prev")},e.fn.moveIndex=function(t){var n=r(this);return"next"==t?t=n[0]+1:"prev"==t&&(t=n[0]-1),0>t?t=n[1].length-1:t>=n[1].length&&(t=0),e(n[1][t]).trigger("focus")},e.fn.getTabIndex=function(){return r(this)[0]};var r=function(t){var n=t.filter("input, select, textarea").get(0),i=[],r=[];if(!n)return[-1,[]];e.each(n.form.elements,function(e,t){"FIELDSET"==t.tagName||t.disabled||(t.tabIndex>0?i.push(t):r.push(t))}),i.sort(function(e,t){return e.tabIndex-t.tabIndex}),i=e.merge(i,r);for(var c=0;c<i.length;c++)if(i[c]==n)return[c,i];return[-1,i]};e.fn.limitSelection=function(t,r){var c=jQuery.extend(t&&t.constructor==Object?t:{limit:t,onsuccess:function(){return!0},onfailure:function(e){return alert("You can only select a maximum a of "+e+" items."),!1}},r),a=this,s=function(t){return"select-multiple"==t.type?e("option:selected",a).length:"checkbox"==t.type?a.filter(":checked").length:0},u=function(){return i(a,n(a).slice(0,c.limit)),c.onfailure.apply(a,[c.limit])};return this.bind(a[0]&&"select-multiple"==a[0].type?"change.limitSelection":"click.limitSelection",function(){return s(this)>c.limit?"select-multiple"==this.type?u():c.onfailure.apply(a,[c.limit]):(c.onsuccess.apply(a,[c.limit]),!0)})},e.fn.createCheckboxRange=function(n){var i=jQuery.extend(n&&n.constructor==Object?n:{bind:t.checkboxRangeKeyBinding,onclick:n},n),r=0,c=this,a=e.isFunction(i.onclick);return a&&this.each(function(){i.onclick.apply(this,[e(this).is(":checked")])}),this.each(function(){if("checkbox"!=this.type)return!1;var t=function(e){r=c.index(e.target)},n=function(t){var n=this.checked,s=c.index(t.target),u=Math.min(r,s),o=Math.max(r+1,s);if(a&&e(this).each(function(){i.onclick.apply(this,[n])}),t[i.bind]){for(var l=u;o>l;l++){var h=c.eq(l).attr("checked",n?"checked":"");a&&i.onclick.apply(h[0],[n])}return!0}};return e(this).unbind("click.createCheckboxRange").bind("click.createCheckboxRange",n).bind("click.createCheckboxRange",t),!0})};var c=function(e){var t=e.type;switch(t){case"select":case"select-one":case"select-multiple":t="select";break;case"text":case"hidden":case"textarea":case"password":case"button":case"submit":case"submit":t="text";break;case"checkbox":case"radio":t=t}return t},a=function(e){return jQuery.browser.msie&&!e.attributes.value.specified?e.text:e.value},s=function(t,n){return e.inArray(n,t)>-1},u=function(e){var t=(typeof e).toLowerCase();return"object"==t&&(e instanceof Array?t="array":e instanceof Date&&(t="date")),t}}(jQuery);